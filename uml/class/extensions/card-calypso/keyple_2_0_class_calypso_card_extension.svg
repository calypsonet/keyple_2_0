<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2122.5px" preserveAspectRatio="none" style="width:4265px;height:2122px;background:#FFFFFF;" version="1.1" viewBox="0 0 4265 2122" width="4265px" zoomAndPan="magnify"><defs><filter height="1" id="b11e7tu9a6gb5f0" width="1" x="0" y="0"><feFlood flood-color="#FFFF00" result="flood"/><feComposite in="SourceGraphic" in2="flood" operator="over"/></filter><filter height="1" id="b11e7tu9a6gb5f1" width="1" x="0" y="0"><feFlood flood-color="#FFC0CB" result="flood"/><feComposite in="SourceGraphic" in2="flood" operator="over"/></filter><filter height="1" id="b11e7tu9a6gb5f2" width="1" x="0" y="0"><feFlood flood-color="#00FFFF" result="flood"/><feComposite in="SourceGraphic" in2="flood" operator="over"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="45" lengthAdjust="spacing" textLength="1140" x="1546.25" y="46.7139">Keyple 2.0 - Calypso Card Extension - 2.0.0 (02/06/2021)</text><rect fill="#DDDDDD" height="245.1172" rx="12.5" ry="12.5" style="stroke:#000000;stroke-width:2.5;" width="735" x="1747.5" y="76.6016"/><text fill="#000000" font-family="sans-serif" font-size="35" lengthAdjust="spacing" text-decoration="underline" textLength="220" x="1762.5" y="125.4346">Colors legend</text><text fill="#000000" font-family="sans-serif" font-size="35" lengthAdjust="spacing" textLength="10" x="1992.5" y="125.4346">:</text><ellipse cx="1776.25" cy="158.3984" fill="#000000" rx="6.25" ry="6.25" style="stroke:#000000;stroke-width:0.0;"/><text fill="#000000" font-family="sans-serif" font-size="35" lengthAdjust="spacing" text-decoration="underline" textLength="370" x="1795" y="169.458">External API references</text><text fill="#000000" font-family="sans-serif" font-size="35" lengthAdjust="spacing" textLength="10" x="2175" y="169.458">:</text><rect fill="#000000" height="8.75" style="stroke:#000000;stroke-width:0.0;" width="8.75" x="1815" y="201.1719"/><text fill="#000000" filter="url(#b11e7tu9a6gb5f0)" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacing" textLength="625" x="1827.5" y="213.4814">calypsonet-terminal-reader-java-api</text><rect fill="#000000" height="8.75" style="stroke:#000000;stroke-width:0.0;" width="8.75" x="1815" y="245.1953"/><text fill="#000000" filter="url(#b11e7tu9a6gb5f1)" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacing" textLength="640" x="1827.5" y="257.5049">calypsonet-terminal-calypso-java-api</text><rect fill="#000000" height="8.75" style="stroke:#000000;stroke-width:0.0;" width="8.75" x="1815" y="289.2188"/><text fill="#000000" filter="url(#b11e7tu9a6gb5f2)" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacing" textLength="445" x="1827.5" y="301.5283">keyple-java-commons-api</text><!--MD5=[d08f533e0a97815ebcffa7318f61e649]
cluster calypso--><polygon fill="#F8F9F9" points="40,359.2188,607.5,359.2188,625,418.2422,4222.5,418.2422,4222.5,2106.7188,40,2106.7188,40,359.2188" style="stroke:#000000;stroke-width:3.75;"/><line style="stroke:#000000;stroke-width:3.75;" x1="40" x2="625" y1="418.2422" y2="418.2422"/><text fill="#000000" font-family="sans-serif" font-size="35" font-weight="bold" lengthAdjust="spacing" textLength="552.5" x="50" y="400.5518">org.eclipse.keyple.card.calypso</text><!--MD5=[1c98f2ddcf0ec237530a877de505d4bf]
class CalypsoExtensionService--><rect codeLine="56" fill="#FEFECE" height="442.5977" id="CalypsoExtensionService" style="stroke:#D4AC0D;stroke-width:3.75;" width="1795" x="1007.5" y="449.2188"/><ellipse cx="1671.875" cy="499.4531" fill="#ADD1B2" rx="27.5" ry="27.5" style="stroke:#ADD1B2;stroke-width:2.5;"/><path d="M1676.875,490.7031 Q1677.3828,489.4531 1677.9688,488.8281 Q1678.5547,488.2031 1679.2188,488.2031 Q1680.3906,488.2031 1681.1328,488.9063 Q1681.875,489.6094 1681.875,491.25 L1681.875,495.1563 Q1681.875,496.7969 1681.1719,497.5 Q1680.4688,498.2031 1679.375,498.2031 Q1678.3984,498.2031 1677.7734,497.7734 Q1677.1484,497.3438 1676.875,496.2109 Q1676.7578,495.4297 1676.3281,495 Q1675.5469,494.1797 1674.1406,493.7109 Q1672.7344,493.2031 1671.3281,493.2031 Q1669.5703,493.2031 1668.0859,493.9063 Q1666.6406,494.6094 1665.5078,496.1719 Q1664.375,497.7344 1664.375,499.8828 L1664.375,502.1875 Q1664.375,504.7656 1666.4844,506.4844 Q1668.5938,508.2031 1672.3438,508.2031 Q1674.5703,508.2031 1676.1328,507.6953 Q1677.0313,507.4219 1678.0469,506.5234 Q1678.7109,506.0156 1679.0625,505.8594 Q1679.4141,505.7031 1679.8438,505.7031 Q1680.6641,505.7031 1681.25,506.3672 Q1681.875,506.9922 1681.875,507.8906 Q1681.875,508.75 1681.0156,509.7656 Q1679.7656,511.25 1677.7734,512.0703 Q1675.1563,513.2031 1671.9531,513.2031 Q1668.2031,513.2031 1665.1953,511.7188 Q1662.7734,510.5469 1661.0547,508.0078 Q1659.375,505.4688 1659.375,502.4609 L1659.375,499.7266 Q1659.375,496.6016 1660.8594,493.8672 Q1662.3828,491.1328 1665,489.6875 Q1667.6563,488.2031 1670.625,488.2031 Q1672.4219,488.2031 1673.9844,488.8281 Q1675.5469,489.4531 1676.875,490.7031 Z " fill="#000000"/><ellipse cx="1735.625" cy="498.2031" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="30" font-style="italic" lengthAdjust="spacing" textLength="35" x="1775.625" y="492.8613">&lt;&lt;</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f2)" font-family="sans-serif" font-size="30" font-style="italic" lengthAdjust="spacing" textLength="297.5" x="1810.625" y="492.8613">KeypleCardExtension</text><text fill="#000000" font-family="sans-serif" font-size="30" font-style="italic" lengthAdjust="spacing" textLength="35" x="2108.125" y="492.8613">&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="30" font-style="italic" font-weight="bold" lengthAdjust="spacing" textLength="60" x="1750.625" y="530.5957">final</text><text fill="#000000" font-family="sans-serif" font-size="30" font-style="italic" lengthAdjust="spacing" textLength="350" x="1818.125" y="530.5957">CalypsoExtensionService</text><line style="stroke:#D4AC0D;stroke-width:3.75;" x1="1010" x2="2800" y1="549.6875" y2="549.6875"/><line style="stroke:#D4AC0D;stroke-width:2.5;" x1="1010" x2="2800" y1="569.6875" y2="569.6875"/><ellipse cx="1035" cy="597.1875" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" text-decoration="underline" textLength="482.5" x="1057.5" y="608.2349">CalypsoExtensionService getInstance ()</text><line style="stroke:#D4AC0D;stroke-width:2.5;stroke-dasharray:1.0,2.0;" x1="1010" x2="2800" y1="624.2773" y2="624.2773"/><ellipse cx="1035" cy="651.7773" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="467.5" x="1057.5" y="662.8247">CalypsoSelector createCardSelector ()</text><ellipse cx="1035" cy="686.3672" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" filter="url(#b11e7tu9a6gb5f1)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="265" x="1057.5" y="697.4146">CalypsoCardSelection</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="1017.5" x="1330" y="697.4146">createCardSelection (CalypsoSelector cardSelector, boolean acceptInvalidatedCard)</text><line style="stroke:#D4AC0D;stroke-width:2.5;stroke-dasharray:1.0,2.0;" x1="1010" x2="2800" y1="713.457" y2="713.457"/><ellipse cx="1035" cy="740.957" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="935" x="1057.5" y="752.0044">CalypsoSamResourceProfileExtension createSamResourceProfileExtension ()</text><ellipse cx="1035" cy="775.5469" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="680" x="1057.5" y="786.5942">CalypsoCardSecuritySetting createCardSecuritySetting (</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f0)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="145" x="1737.5" y="786.5942">CardReader</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="145" x="1890" y="786.5942">samReader,</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f1)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="150" x="2042.5" y="786.5942">CalypsoSam</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="157.5" x="2200" y="786.5942">calypsoSam)</text><ellipse cx="1035" cy="810.1367" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" filter="url(#b11e7tu9a6gb5f1)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="292.5" x="1057.5" y="821.1841">CardTransactionService</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="295" x="1357.5" y="821.1841">createCardTransaction (</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f0)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="145" x="1652.5" y="821.1841">CardReader</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="150" x="1805" y="821.1841">cardReader,</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f1)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="155" x="1962.5" y="821.1841">CalypsoCard</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="160" x="2125" y="821.1841">calypsoCard,</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f1)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="240" x="2292.5" y="821.1841">CardSecuritySetting</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="247.5" x="2540" y="821.1841">cardSecuritySetting)</text><line style="stroke:#D4AC0D;stroke-width:2.5;stroke-dasharray:1.0,2.0;" x1="1010" x2="2800" y1="837.2266" y2="837.2266"/><ellipse cx="1035" cy="864.7266" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" filter="url(#b11e7tu9a6gb5f1)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="292.5" x="1057.5" y="875.7739">CardTransactionService</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="485" x="1357.5" y="875.7739">createCardTransactionWithoutSecurity (</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f0)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="145" x="1842.5" y="875.7739">CardReader</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="150" x="1995" y="875.7739">cardReader,</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f1)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="155" x="2152.5" y="875.7739">CalypsoCard</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="162.5" x="2315" y="875.7739">calypsoCard)</text><!--MD5=[512dd2b9f0b598d53b21481253a5db2e]
class CalypsoSelector--><rect codeLine="71" fill="#FEFECE" height="703.9063" id="CalypsoSelector" style="stroke:#D4AC0D;stroke-width:3.75;" width="1110" x="80" y="1224.2188"/><ellipse cx="485.625" cy="1274.4531" fill="#B4A7E5" rx="27.5" ry="27.5" style="stroke:#B4A7E5;stroke-width:2.5;"/><path d="M488.125,1266.9531 L488.125,1281.9531 L493.125,1281.9531 L494.3359,1281.9531 L495.625,1283.5156 L495.625,1284.4531 L495.625,1285.3906 L494.3359,1286.9531 L493.125,1286.9531 L478.125,1286.9531 L476.9141,1286.9531 L475.625,1285.3906 L475.625,1284.4531 L475.625,1283.5156 L476.9141,1281.9531 L478.125,1281.9531 L483.125,1281.9531 L483.125,1266.9531 L478.125,1266.9531 L476.9141,1266.9531 L475.625,1265.3906 L475.625,1264.4531 L475.625,1263.5156 L476.9141,1261.9531 L478.125,1261.9531 L493.125,1261.9531 L494.3359,1261.9531 L495.625,1263.5156 L495.625,1264.4531 L495.625,1265.3906 L494.3359,1266.9531 L493.125,1266.9531 L488.125,1266.9531 Z " fill="#000000"/><ellipse cx="549.375" cy="1273.2031" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="30" font-style="italic" lengthAdjust="spacing" textLength="35" x="564.375" y="1267.8613">&lt;&lt;</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f0)" font-family="sans-serif" font-size="30" font-style="italic" lengthAdjust="spacing" textLength="180" x="599.375" y="1267.8613">CardSelector</text><text fill="#000000" font-family="sans-serif" font-size="30" font-style="italic" lengthAdjust="spacing" textLength="35" x="779.375" y="1267.8613">&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="30" font-style="italic" lengthAdjust="spacing" textLength="225" x="576.875" y="1305.5957">CalypsoSelector</text><line style="stroke:#D4AC0D;stroke-width:3.75;" x1="82.5" x2="1187.5" y1="1324.6875" y2="1324.6875"/><line style="stroke:#D4AC0D;stroke-width:2.5;" x1="82.5" x2="1187.5" y1="1344.6875" y2="1344.6875"/><ellipse cx="107.5" cy="1372.1875" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="702.5" x="130" y="1383.2349">CalypsoSelector filterByCardProtocol (String cardProtocol)</text><ellipse cx="107.5" cy="1406.7773" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="812.5" x="130" y="1417.8247">CalypsoSelector filterByPowerOnData (String powerOnDataRegex)</text><ellipse cx="107.5" cy="1441.3672" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="522.5" x="130" y="1452.4146">CalypsoSelector filterByDfName (byte[] aid)</text><ellipse cx="107.5" cy="1475.957" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="525" x="130" y="1487.0044">CalypsoSelector filterByDfName (String aid)</text><ellipse cx="107.5" cy="1510.5469" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="445" x="130" y="1521.5942">CalypsoSelector setFileOccurrence (</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f0)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="185" x="575" y="1521.5942">FileOccurrence</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="190" x="767.5" y="1521.5942">fileOccurrence)</text><ellipse cx="107.5" cy="1545.1367" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="517.5" x="130" y="1556.1841">CalypsoSelector setFileControlInformation (</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f0)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="257.5" x="647.5" y="1556.1841">FileControlInformation</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="262.5" x="912.5" y="1556.1841">fileControlInformation)</text><ellipse cx="107.5" cy="1579.7266" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="732.5" x="130" y="1590.7739">CalypsoSelector addSuccessfulStatusWord (int statusWord)</text><ellipse cx="107.5" cy="1658.9063" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="297.5" x="130" y="1669.9536">String getCardProtocol ()</text><ellipse cx="107.5" cy="1693.4961" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="390" x="130" y="1704.5435">String getPowerOnDataRegex ()</text><ellipse cx="107.5" cy="1728.0859" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="180" x="130" y="1739.1333">byte[] getAid ()</text><ellipse cx="107.5" cy="1762.6758" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" filter="url(#b11e7tu9a6gb5f0)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="185" x="130" y="1773.7231">FileOccurrence</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="250" x="322.5" y="1773.7231">getFileOccurrence ()</text><ellipse cx="107.5" cy="1797.2656" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" filter="url(#b11e7tu9a6gb5f0)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="257.5" x="130" y="1808.313">FileControlInformation</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="322.5" x="395" y="1808.313">getFileControlInformation ()</text><ellipse cx="107.5" cy="1831.8555" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="630" x="130" y="1842.9028">Set&lt;Integer&gt; getSuccessfulSelectionStatusWords ()</text><ellipse cx="107.5" cy="1866.4453" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="732.5" x="130" y="1877.4927">CalypsoSelector addSuccessfulStatusWord (int statusWord)</text><ellipse cx="107.5" cy="1901.0352" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="647.5" x="130" y="1912.0825">boolean powerOnDataMatches (byte[] powerOnData)</text><line style="stroke:#D4AC0D;stroke-width:2.5;stroke-dasharray:1.0,2.0;" x1="82.5" x2="545" y1="1624.1113" y2="1624.1113"/><text fill="#000000" font-family="sans-serif" font-size="27.5" font-weight="bold" lengthAdjust="spacing" textLength="180" x="545" y="1634.1138">CardSelector</text><line style="stroke:#D4AC0D;stroke-width:2.5;stroke-dasharray:1.0,2.0;" x1="725" x2="1187.5" y1="1624.1113" y2="1624.1113"/><!--MD5=[3ff1c1ff43b5681f74f1a3cf0125a676]
class CalypsoSamResourceProfileExtension--><rect codeLine="91" fill="#FEFECE" height="244.2383" id="CalypsoSamResourceProfileExtension" style="stroke:#D4AC0D;stroke-width:3.75;" width="1252.5" x="1278.75" y="1454.2188"/><ellipse cx="1586.875" cy="1504.4531" fill="#B4A7E5" rx="27.5" ry="27.5" style="stroke:#B4A7E5;stroke-width:2.5;"/><path d="M1589.375,1496.9531 L1589.375,1511.9531 L1594.375,1511.9531 L1595.5859,1511.9531 L1596.875,1513.5156 L1596.875,1514.4531 L1596.875,1515.3906 L1595.5859,1516.9531 L1594.375,1516.9531 L1579.375,1516.9531 L1578.1641,1516.9531 L1576.875,1515.3906 L1576.875,1514.4531 L1576.875,1513.5156 L1578.1641,1511.9531 L1579.375,1511.9531 L1584.375,1511.9531 L1584.375,1496.9531 L1579.375,1496.9531 L1578.1641,1496.9531 L1576.875,1495.3906 L1576.875,1494.4531 L1576.875,1493.5156 L1578.1641,1491.9531 L1579.375,1491.9531 L1594.375,1491.9531 L1595.5859,1491.9531 L1596.875,1493.5156 L1596.875,1494.4531 L1596.875,1495.3906 L1595.5859,1496.9531 L1594.375,1496.9531 L1589.375,1496.9531 Z " fill="#000000"/><ellipse cx="1650.625" cy="1503.2031" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="30" font-style="italic" lengthAdjust="spacing" textLength="35" x="1665.625" y="1497.8613">&lt;&lt;</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f2)" font-family="sans-serif" font-size="30" font-style="italic" lengthAdjust="spacing" textLength="517.5" x="1700.625" y="1497.8613">KeypleCardResourceProfileExtension</text><text fill="#000000" font-family="sans-serif" font-size="30" font-style="italic" lengthAdjust="spacing" textLength="35" x="2218.125" y="1497.8613">&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="30" font-style="italic" lengthAdjust="spacing" textLength="532.5" x="1693.125" y="1535.5957">CalypsoSamResourceProfileExtension</text><line style="stroke:#D4AC0D;stroke-width:3.75;" x1="1281.25" x2="2528.75" y1="1554.6875" y2="1554.6875"/><line style="stroke:#D4AC0D;stroke-width:3.75;" x1="1281.25" x2="2528.75" y1="1574.6875" y2="1574.6875"/><ellipse cx="1306.25" cy="1602.1875" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="677.5" x="1328.75" y="1613.2349">CalypsoSamResourceProfileExtension setSamRevision (</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f1)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="260" x="2006.25" y="1613.2349">CalypsoSam.Revision</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="162.5" x="2273.75" y="1613.2349">samRevision)</text><ellipse cx="1306.25" cy="1636.7773" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="1187.5" x="1328.75" y="1647.8247">CalypsoSamResourceProfileExtension setSamSerialNumberRegex (String samSerialNumberRegex)</text><ellipse cx="1306.25" cy="1671.3672" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="982.5" x="1328.75" y="1682.4146">CalypsoSamResourceProfileExtension setSamUnlockData (String samUnlockData)</text><!--MD5=[ed25ebb8c65c4b25a2e326cf920f7f33]
class CalypsoCardSecuritySetting--><rect codeLine="97" fill="#FEFECE" height="980.625" id="CalypsoCardSecuritySetting" style="stroke:#D4AC0D;stroke-width:3.75;" width="1562.5" x="2618.75" y="1086.7188"/><ellipse cx="3183.125" cy="1136.9531" fill="#B4A7E5" rx="27.5" ry="27.5" style="stroke:#B4A7E5;stroke-width:2.5;"/><path d="M3185.625,1129.4531 L3185.625,1144.4531 L3190.625,1144.4531 L3191.8359,1144.4531 L3193.125,1146.0156 L3193.125,1146.9531 L3193.125,1147.8906 L3191.8359,1149.4531 L3190.625,1149.4531 L3175.625,1149.4531 L3174.4141,1149.4531 L3173.125,1147.8906 L3173.125,1146.9531 L3173.125,1146.0156 L3174.4141,1144.4531 L3175.625,1144.4531 L3180.625,1144.4531 L3180.625,1129.4531 L3175.625,1129.4531 L3174.4141,1129.4531 L3173.125,1127.8906 L3173.125,1126.9531 L3173.125,1126.0156 L3174.4141,1124.4531 L3175.625,1124.4531 L3190.625,1124.4531 L3191.8359,1124.4531 L3193.125,1126.0156 L3193.125,1126.9531 L3193.125,1127.8906 L3191.8359,1129.4531 L3190.625,1129.4531 L3185.625,1129.4531 Z " fill="#000000"/><ellipse cx="3246.875" cy="1135.7031" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="30" font-style="italic" lengthAdjust="spacing" textLength="35" x="3283.125" y="1130.3613">&lt;&lt;</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f1)" font-family="sans-serif" font-size="30" font-style="italic" lengthAdjust="spacing" textLength="272.5" x="3318.125" y="1130.3613">CardSecuritySetting</text><text fill="#000000" font-family="sans-serif" font-size="30" font-style="italic" lengthAdjust="spacing" textLength="35" x="3590.625" y="1130.3613">&gt;&gt;</text><text fill="#000000" font-family="sans-serif" font-size="30" font-style="italic" lengthAdjust="spacing" textLength="385" x="3261.875" y="1168.0957">CalypsoCardSecuritySetting</text><line style="stroke:#D4AC0D;stroke-width:3.75;" x1="2621.25" x2="4178.75" y1="1187.1875" y2="1187.1875"/><line style="stroke:#D4AC0D;stroke-width:2.5;" x1="2621.25" x2="4178.75" y1="1207.1875" y2="1207.1875"/><ellipse cx="2646.25" cy="1234.6875" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="637.5" x="2668.75" y="1245.7349">CalypsoCardSecuritySetting enableMultipleSession ()</text><ellipse cx="2646.25" cy="1269.2773" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="720" x="2668.75" y="1280.3247">CalypsoCardSecuritySetting enableRatificationMechanism ()</text><ellipse cx="2646.25" cy="1303.8672" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="620" x="2668.75" y="1314.9146">CalypsoCardSecuritySetting disablePinEncryption ()</text><ellipse cx="2646.25" cy="1338.457" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="475" x="2668.75" y="1349.5044">CalypsoCardSecuritySetting assignKif (</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f1)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="257.5" x="3143.75" y="1349.5044">SessionAccessLevel</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="367.5" x="3408.75" y="1349.5044">sessionAccessLevel, byte kif)</text><ellipse cx="2646.25" cy="1373.0469" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="490" x="2668.75" y="1384.0942">CalypsoCardSecuritySetting assignKvc (</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f1)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="257.5" x="3158.75" y="1384.0942">SessionAccessLevel</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="382.5" x="3423.75" y="1384.0942">sessionAccessLevel, byte kvc)</text><ellipse cx="2646.25" cy="1407.6367" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="670" x="2668.75" y="1418.6841">CalypsoCardSecuritySetting assignKeyRecordNumber (</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f1)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="257.5" x="3338.75" y="1418.6841">SessionAccessLevel</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="562.5" x="3603.75" y="1418.6841">sessionAccessLevel, byte keyRecordNumber)</text><ellipse cx="2646.25" cy="1442.2266" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="1142.5" x="2668.75" y="1453.2739">CalypsoCardSecuritySetting sessionAuthorizedKvcList (List&lt;Byte&gt; sessionAuthorizedKvcList)</text><ellipse cx="2646.25" cy="1476.8164" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="772.5" x="2668.75" y="1487.8638">CalypsoCardSecuritySetting pinCipheringKey (byte kif, byte kvc)</text><ellipse cx="2646.25" cy="1511.4063" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="1225" x="2668.75" y="1522.4536">CalypsoCardSecuritySetting isLoadAndDebitSvLogRequired (boolean isLoadAndDebitSvLogRequired)</text><ellipse cx="2646.25" cy="1545.9961" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="1185" x="2668.75" y="1557.0435">CalypsoCardSecuritySetting isSvNegativeBalanceAllowed (boolean isSvNegativeBalanceAllowed)</text><ellipse cx="2646.25" cy="1625.1758" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" filter="url(#b11e7tu9a6gb5f0)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="145" x="2668.75" y="1636.2231">CardReader</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="205" x="2821.25" y="1636.2231">getSamReader ()</text><ellipse cx="2646.25" cy="1659.7656" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" filter="url(#b11e7tu9a6gb5f1)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="150" x="2668.75" y="1670.813">CalypsoSam</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="215" x="2826.25" y="1670.813">getCalypsoSam ()</text><ellipse cx="2646.25" cy="1694.3555" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="430" x="2668.75" y="1705.4028">boolean isMultipleSessionEnabled ()</text><ellipse cx="2646.25" cy="1728.9453" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="512.5" x="2668.75" y="1739.9927">boolean isRatificationMechanismEnabled ()</text><ellipse cx="2646.25" cy="1763.5352" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="575" x="2668.75" y="1774.5825">boolean isPinTransmissionEncryptionDisabled ()</text><ellipse cx="2646.25" cy="1798.125" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="150" x="2668.75" y="1809.1724">Byte getKif (</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f1)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="257.5" x="2818.75" y="1809.1724">SessionAccessLevel</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="265" x="3083.75" y="1809.1724">sessionAccessLevel)</text><ellipse cx="2646.25" cy="1832.7148" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="165" x="2668.75" y="1843.7622">Byte getKvc (</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f1)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="257.5" x="2833.75" y="1843.7622">SessionAccessLevel</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="265" x="3098.75" y="1843.7622">sessionAccessLevel)</text><ellipse cx="2646.25" cy="1867.3047" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="345" x="2668.75" y="1878.3521">Byte getKeyRecordNumber (</text><text fill="#000000" filter="url(#b11e7tu9a6gb5f1)" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="257.5" x="3013.75" y="1878.3521">SessionAccessLevel</text><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="265" x="3278.75" y="1878.3521">sessionAccessLevel)</text><ellipse cx="2646.25" cy="1901.8945" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="432.5" x="2668.75" y="1912.9419">boolean isKvcAuthorized (byte kvc)</text><ellipse cx="2646.25" cy="1936.4844" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="305" x="2668.75" y="1947.5317">byte getPinCipheringKif ()</text><ellipse cx="2646.25" cy="1971.0742" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="320" x="2668.75" y="1982.1216">byte getPinCipheringKvc ()</text><ellipse cx="2646.25" cy="2005.6641" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="505" x="2668.75" y="2016.7114">boolean isLoadAndDebitSvLogRequired ()</text><ellipse cx="2646.25" cy="2040.2539" fill="#84BE84" rx="7.5" ry="7.5" style="stroke:#038048;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="27.5" lengthAdjust="spacing" textLength="485" x="2668.75" y="2051.3013">boolean isSvNegativeBalanceAllowed ()</text><line style="stroke:#D4AC0D;stroke-width:2.5;stroke-dasharray:1.0,2.0;" x1="2621.25" x2="3262.5" y1="1590.3809" y2="1590.3809"/><text fill="#000000" font-family="sans-serif" font-size="27.5" font-weight="bold" lengthAdjust="spacing" textLength="275" x="3262.5" y="1600.3833">CardSecuritySetting</text><line style="stroke:#D4AC0D;stroke-width:2.5;stroke-dasharray:1.0,2.0;" x1="3537.5" x2="4178.75" y1="1590.3809" y2="1590.3809"/><!--MD5=[237f882b7aa969134fa0f7d5eda4e87f]
link CalypsoExtensionService to CalypsoSamResourceProfileExtension--><path codeLine="128" d="M1905,892.2862 C1905,1063.7438 1905,1296.4988 1905,1440.9312 " fill="none" id="CalypsoExtensionService-to-CalypsoSamResourceProfileExtension" style="stroke:#27AE60;stroke-width:2.5;stroke-dasharray:7.0,7.0;"/><polygon fill="#27AE60" points="1905,1453.7613,1915,1431.2613,1905,1441.2613,1895,1431.2613,1905,1453.7613" style="stroke:#27AE60;stroke-width:2.5;"/><polygon fill="#000000" points="1917.5,1002.1582,1924.8473,979.5455,1910.1527,979.5455,1917.5,1002.1582" style="stroke:#000000;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacing" textLength="90" x="1940" y="1002.9565">create</text><!--MD5=[1d695465759724275b0242abce1bb78e]
link CalypsoExtensionService to CalypsoCardSecuritySetting--><path codeLine="129" d="M2268.8075,892.2862 C2372.21,954.6238 2489.055,1025.0638 2607.425,1096.4138 " fill="none" id="CalypsoExtensionService-to-CalypsoCardSecuritySetting" style="stroke:#27AE60;stroke-width:2.5;stroke-dasharray:7.0,7.0;"/><polygon fill="#27AE60" points="2618.125,1102.8763,2603.9853,1082.7189,2607.4092,1096.4403,2593.6878,1099.8642,2618.125,1102.8763" style="stroke:#27AE60;stroke-width:2.5;"/><polygon fill="#000000" points="2453.2053,996.1116,2437.6325,978.1449,2430.046,990.7297,2453.2053,996.1116" style="stroke:#000000;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacing" textLength="90" x="2465" y="1002.9565">create</text><!--MD5=[54ac7ca1444c9534a8986f1106108e6d]
link CalypsoExtensionService to CalypsoSelector--><path codeLine="130" d="M1530.845,892.2338 C1432.9275,952.7913 1328.6125,1020.2038 1235,1086.7188 C1178.115,1127.1363 1119.59,1171.2463 1062.4325,1215.8787 " fill="none" id="CalypsoExtensionService-to-CalypsoSelector" style="stroke:#27AE60;stroke-width:2.5;stroke-dasharray:7.0,7.0;"/><polygon fill="#27AE60" points="1052.5275,1223.6313,1076.4103,1217.6429,1062.3724,1215.9288,1064.0865,1201.891,1052.5275,1223.6313" style="stroke:#27AE60;stroke-width:2.5;"/><polygon fill="#000000" points="1397.216,996.7638,1419.9965,989.9544,1411.6433,977.8649,1397.216,996.7638" style="stroke:#000000;stroke-width:2.5;"/><text fill="#000000" font-family="sans-serif" font-size="32.5" lengthAdjust="spacing" textLength="90" x="1430" y="1002.9565">create</text><!--MD5=[ff8e4b3ab299968c61bd02abacab8c28]
@startuml
title
    Keyple 2.0 - Calypso Card Extension - 2.0.0 (02/06/2021)
end title

' == THEME ==

'Couleurs issues de : https://htmlcolorcodes.com/fr/tableau-de-couleur/tableau-de-couleur-design-plat/
!define C_GREY1 F8F9F9
!define C_GREY2 F2F3F4
!define C_GREY3 E5E7E9
!define C_GREY4 D7DBDD
!define C_GREY5 CACFD2
!define C_GREY6 BDC3C7
!define C_LINK 3498DB
!define C_USE 27AE60

skinparam Shadowing false
skinparam ClassFontStyle italic
skinparam ClassBorderColor #D4AC0D
skinparam stereotypeABorderColor #A9DCDF
skinparam stereotypeIBorderColor #B4A7E5
skinparam stereotypeCBorderColor #ADD1B2
skinparam stereotypeEBorderColor #EB93DF
' Red
skinparam ClassBackgroundColor<<red>> #FDEDEC
skinparam ClassBorderColor<<red>> #E74C3C
hide <<red>> stereotype
' Purple
skinparam ClassBackgroundColor<<purple>> #F4ECF7
skinparam ClassBorderColor<<purple>> #8E44AD
hide <<purple>> stereotype
' blue
skinparam ClassBackgroundColor<<blue>> #EBF5FB
skinparam ClassBorderColor<<blue>> #3498DB
hide <<blue>> stereotype
' Green
skinparam ClassBackgroundColor<<green>> #E9F7EF
skinparam ClassBorderColor<<green>> #27AE60
hide <<green>> stereotype
' Grey
skinparam ClassBackgroundColor<<grey>> #EAECEE
skinparam ClassBorderColor<<grey>> #2C3E50
hide <<grey>> stereotype

' == CONTENT ==

legend top
    __Colors legend__ :
    * __External API references__ :
    ** <back:yellow>**calypsonet-terminal-reader-java-api**</back>
    ** <back:pink>**calypsonet-terminal-calypso-java-api**</back>
    ** <back:cyan>**keyple-java-commons-api**</back>
end legend

package "org.eclipse.keyple.card.calypso" as calypso {
    +class "<<<back:cyan>KeypleCardExtension</back>>>\n**final** CalypsoExtensionService" as CalypsoExtensionService {
        - -
        +{static} CalypsoExtensionService getInstance ()
        ..
        +CalypsoSelector createCardSelector ()
        +<back:pink>CalypsoCardSelection</back> createCardSelection (CalypsoSelector cardSelector, boolean acceptInvalidatedCard)
        ..
        +CalypsoSamResourceProfileExtension createSamResourceProfileExtension ()
        +CalypsoCardSecuritySetting createCardSecuritySetting (<back:yellow>CardReader</back> samReader, <back:pink>CalypsoSam</back> calypsoSam)
        +<back:pink>CardTransactionService</back> createCardTransaction (<back:yellow>CardReader</back> cardReader, <back:pink>CalypsoCard</back> calypsoCard, <back:pink>CardSecuritySetting</back> cardSecuritySetting)
        ..
        +<back:pink>CardTransactionService</back> createCardTransactionWithoutSecurity (<back:yellow>CardReader</back> cardReader, <back:pink>CalypsoCard</back> calypsoCard)
    }


    +interface "<<<back:yellow>CardSelector</back>>>\nCalypsoSelector" as CalypsoSelector {
        - -
        +CalypsoSelector filterByCardProtocol (String cardProtocol)
        +CalypsoSelector filterByPowerOnData (String powerOnDataRegex)
        +CalypsoSelector filterByDfName (byte[] aid)
        +CalypsoSelector filterByDfName (String aid)
        +CalypsoSelector setFileOccurrence (<back:yellow>FileOccurrence</back> fileOccurrence)
        +CalypsoSelector setFileControlInformation (<back:yellow>FileControlInformation</back> fileControlInformation)
        +CalypsoSelector addSuccessfulStatusWord (int statusWord)
        .. **CardSelector** ..
        +String getCardProtocol ()
        +String getPowerOnDataRegex ()
        +byte[] getAid ()
        +<back:yellow>FileOccurrence</back> getFileOccurrence ()
        +<back:yellow>FileControlInformation</back> getFileControlInformation ()
        +Set<Integer> getSuccessfulSelectionStatusWords ()
        +CalypsoSelector addSuccessfulStatusWord (int statusWord)
        +boolean powerOnDataMatches (byte[] powerOnData)
    }

    +interface "<<<back:cyan>KeypleCardResourceProfileExtension</back>>>\nCalypsoSamResourceProfileExtension" as CalypsoSamResourceProfileExtension {
        +CalypsoSamResourceProfileExtension setSamRevision (<back:pink>CalypsoSam.Revision</back> samRevision)
        +CalypsoSamResourceProfileExtension setSamSerialNumberRegex (String samSerialNumberRegex)
        +CalypsoSamResourceProfileExtension setSamUnlockData (String samUnlockData)
    }

    +interface "<<<back:pink>CardSecuritySetting</back>>>\nCalypsoCardSecuritySetting" as CalypsoCardSecuritySetting {
        - -
        +CalypsoCardSecuritySetting enableMultipleSession ()
        +CalypsoCardSecuritySetting enableRatificationMechanism ()
        +CalypsoCardSecuritySetting disablePinEncryption ()
        +CalypsoCardSecuritySetting assignKif (<back:pink>SessionAccessLevel</back> sessionAccessLevel, byte kif)
        +CalypsoCardSecuritySetting assignKvc (<back:pink>SessionAccessLevel</back> sessionAccessLevel, byte kvc)
        +CalypsoCardSecuritySetting assignKeyRecordNumber (<back:pink>SessionAccessLevel</back> sessionAccessLevel, byte keyRecordNumber)
        +CalypsoCardSecuritySetting sessionAuthorizedKvcList (List<Byte> sessionAuthorizedKvcList)
        +CalypsoCardSecuritySetting pinCipheringKey (byte kif, byte kvc)
        +CalypsoCardSecuritySetting isLoadAndDebitSvLogRequired (boolean isLoadAndDebitSvLogRequired)
        +CalypsoCardSecuritySetting isSvNegativeBalanceAllowed (boolean isSvNegativeBalanceAllowed)
        .. **CardSecuritySetting** ..
        +<back:yellow>CardReader</back> getSamReader ()
        +<back:pink>CalypsoSam</back> getCalypsoSam ()
        +boolean isMultipleSessionEnabled ()
        +boolean isRatificationMechanismEnabled ()
        +boolean isPinTransmissionEncryptionDisabled ()
        +Byte getKif (<back:pink>SessionAccessLevel</back> sessionAccessLevel)
        +Byte getKvc (<back:pink>SessionAccessLevel</back> sessionAccessLevel)
        +Byte getKeyRecordNumber (<back:pink>SessionAccessLevel</back> sessionAccessLevel)
        +boolean isKvcAuthorized (byte kvc)
        +byte getPinCipheringKif ()
        +byte getPinCipheringKvc ()
        +boolean isLoadAndDebitSvLogRequired ()
        +boolean isSvNegativeBalanceAllowed ()
    }
}

' Associations

CalypsoExtensionService ..> CalypsoSamResourceProfileExtension #C_USE : create >
CalypsoExtensionService ..> CalypsoCardSecuritySetting #C_USE : create >
CalypsoExtensionService ..> CalypsoSelector #C_USE : create >

' == LAYOUT ==

'CardRevision -[hidden]- SamCardResourceServiceBuilder

' == STYLE ==

package calypso #C_GREY1 {}


@enduml

@startuml
title
    Keyple 2.0 - Calypso Card Extension - 2.0.0 (02/06/2021)
end title



skinparam Shadowing false
skinparam ClassFontStyle italic
skinparam ClassBorderColor #D4AC0D
skinparam stereotypeABorderColor #A9DCDF
skinparam stereotypeIBorderColor #B4A7E5
skinparam stereotypeCBorderColor #ADD1B2
skinparam stereotypeEBorderColor #EB93DF
skinparam ClassBackgroundColor<<red>> #FDEDEC
skinparam ClassBorderColor<<red>> #E74C3C
hide <<red>> stereotype
skinparam ClassBackgroundColor<<purple>> #F4ECF7
skinparam ClassBorderColor<<purple>> #8E44AD
hide <<purple>> stereotype
skinparam ClassBackgroundColor<<blue>> #EBF5FB
skinparam ClassBorderColor<<blue>> #3498DB
hide <<blue>> stereotype
skinparam ClassBackgroundColor<<green>> #E9F7EF
skinparam ClassBorderColor<<green>> #27AE60
hide <<green>> stereotype
skinparam ClassBackgroundColor<<grey>> #EAECEE
skinparam ClassBorderColor<<grey>> #2C3E50
hide <<grey>> stereotype


legend top
    __Colors legend__ :
    * __External API references__ :
    ** <back:yellow>**calypsonet-terminal-reader-java-api**</back>
    ** <back:pink>**calypsonet-terminal-calypso-java-api**</back>
    ** <back:cyan>**keyple-java-commons-api**</back>
end legend

package "org.eclipse.keyple.card.calypso" as calypso {
    +class "<<<back:cyan>KeypleCardExtension</back>>>\n**final** CalypsoExtensionService" as CalypsoExtensionService {
        - -
        +{static} CalypsoExtensionService getInstance ()
        ..
        +CalypsoSelector createCardSelector ()
        +<back:pink>CalypsoCardSelection</back> createCardSelection (CalypsoSelector cardSelector, boolean acceptInvalidatedCard)
        ..
        +CalypsoSamResourceProfileExtension createSamResourceProfileExtension ()
        +CalypsoCardSecuritySetting createCardSecuritySetting (<back:yellow>CardReader</back> samReader, <back:pink>CalypsoSam</back> calypsoSam)
        +<back:pink>CardTransactionService</back> createCardTransaction (<back:yellow>CardReader</back> cardReader, <back:pink>CalypsoCard</back> calypsoCard, <back:pink>CardSecuritySetting</back> cardSecuritySetting)
        ..
        +<back:pink>CardTransactionService</back> createCardTransactionWithoutSecurity (<back:yellow>CardReader</back> cardReader, <back:pink>CalypsoCard</back> calypsoCard)
    }


    +interface "<<<back:yellow>CardSelector</back>>>\nCalypsoSelector" as CalypsoSelector {
        - -
        +CalypsoSelector filterByCardProtocol (String cardProtocol)
        +CalypsoSelector filterByPowerOnData (String powerOnDataRegex)
        +CalypsoSelector filterByDfName (byte[] aid)
        +CalypsoSelector filterByDfName (String aid)
        +CalypsoSelector setFileOccurrence (<back:yellow>FileOccurrence</back> fileOccurrence)
        +CalypsoSelector setFileControlInformation (<back:yellow>FileControlInformation</back> fileControlInformation)
        +CalypsoSelector addSuccessfulStatusWord (int statusWord)
        .. **CardSelector** ..
        +String getCardProtocol ()
        +String getPowerOnDataRegex ()
        +byte[] getAid ()
        +<back:yellow>FileOccurrence</back> getFileOccurrence ()
        +<back:yellow>FileControlInformation</back> getFileControlInformation ()
        +Set<Integer> getSuccessfulSelectionStatusWords ()
        +CalypsoSelector addSuccessfulStatusWord (int statusWord)
        +boolean powerOnDataMatches (byte[] powerOnData)
    }

    +interface "<<<back:cyan>KeypleCardResourceProfileExtension</back>>>\nCalypsoSamResourceProfileExtension" as CalypsoSamResourceProfileExtension {
        +CalypsoSamResourceProfileExtension setSamRevision (<back:pink>CalypsoSam.Revision</back> samRevision)
        +CalypsoSamResourceProfileExtension setSamSerialNumberRegex (String samSerialNumberRegex)
        +CalypsoSamResourceProfileExtension setSamUnlockData (String samUnlockData)
    }

    +interface "<<<back:pink>CardSecuritySetting</back>>>\nCalypsoCardSecuritySetting" as CalypsoCardSecuritySetting {
        - -
        +CalypsoCardSecuritySetting enableMultipleSession ()
        +CalypsoCardSecuritySetting enableRatificationMechanism ()
        +CalypsoCardSecuritySetting disablePinEncryption ()
        +CalypsoCardSecuritySetting assignKif (<back:pink>SessionAccessLevel</back> sessionAccessLevel, byte kif)
        +CalypsoCardSecuritySetting assignKvc (<back:pink>SessionAccessLevel</back> sessionAccessLevel, byte kvc)
        +CalypsoCardSecuritySetting assignKeyRecordNumber (<back:pink>SessionAccessLevel</back> sessionAccessLevel, byte keyRecordNumber)
        +CalypsoCardSecuritySetting sessionAuthorizedKvcList (List<Byte> sessionAuthorizedKvcList)
        +CalypsoCardSecuritySetting pinCipheringKey (byte kif, byte kvc)
        +CalypsoCardSecuritySetting isLoadAndDebitSvLogRequired (boolean isLoadAndDebitSvLogRequired)
        +CalypsoCardSecuritySetting isSvNegativeBalanceAllowed (boolean isSvNegativeBalanceAllowed)
        .. **CardSecuritySetting** ..
        +<back:yellow>CardReader</back> getSamReader ()
        +<back:pink>CalypsoSam</back> getCalypsoSam ()
        +boolean isMultipleSessionEnabled ()
        +boolean isRatificationMechanismEnabled ()
        +boolean isPinTransmissionEncryptionDisabled ()
        +Byte getKif (<back:pink>SessionAccessLevel</back> sessionAccessLevel)
        +Byte getKvc (<back:pink>SessionAccessLevel</back> sessionAccessLevel)
        +Byte getKeyRecordNumber (<back:pink>SessionAccessLevel</back> sessionAccessLevel)
        +boolean isKvcAuthorized (byte kvc)
        +byte getPinCipheringKif ()
        +byte getPinCipheringKvc ()
        +boolean isLoadAndDebitSvLogRequired ()
        +boolean isSvNegativeBalanceAllowed ()
    }
}


CalypsoExtensionService ..> CalypsoSamResourceProfileExtension #27AE60 : create >
CalypsoExtensionService ..> CalypsoCardSecuritySetting #27AE60 : create >
CalypsoExtensionService ..> CalypsoSelector #27AE60 : create >




package calypso #F8F9F9 {}


@enduml

PlantUML version 1.2021.7(Sun May 23 14:40:07 CEST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: Dynamic Code Evolution 64-Bit Server VM
Default Encoding: Cp1252
Language: fr
Country: FR
--></g></svg>